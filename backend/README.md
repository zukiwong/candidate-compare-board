# Candidate Compare Board - Backend API

åŸºäºAIé©±åŠ¨çš„å€™é€‰äººä¸èŒä½åŒ¹é…åç«¯æœåŠ¡ï¼Œä½¿ç”¨Google Gemini 2.5 APIå®ç°æ™ºèƒ½JDè§£æå’Œé¢è¯•é—®é¢˜ç”Ÿæˆã€‚

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

- **æ™ºèƒ½JDè§£æ**: ä½¿ç”¨Gemini AIè‡ªåŠ¨è§£æèŒä½æè¿°æ–‡æœ¬ä¸ºç»“æ„åŒ–æ•°æ®
- **å€™é€‰äººç®¡ç†**: é¢„ç½®10ä¸ªå¤šæ ·åŒ–å€™é€‰äººæ¡£æ¡ˆï¼Œæ”¯æŒä¸€é”®å¯¼å…¥
- **AIåŒ¹é…ç®—æ³•**: å¤šç»´åº¦åŒ¹é…åˆ†æï¼ˆæŠ€èƒ½ã€ç»éªŒã€æ•™è‚²ã€é¡¹ç›®ï¼‰
- **é¢è¯•é—®é¢˜ç”Ÿæˆ**: AIç”Ÿæˆé’ˆå¯¹æ€§é¢è¯•é—®é¢˜
- **æ‰¹é‡åˆ†æ**: æ”¯æŒæ‰¹é‡åŒ¹é…å’Œå€™é€‰äººå¯¹æ¯”
- **å®æ—¶API**: RESTful APIè®¾è®¡ï¼Œæ”¯æŒå‰ç«¯å®æ—¶äº¤äº’

## ğŸ“‹ æŠ€æœ¯æ ˆ

- **Runtime**: Node.js
- **Framework**: Express.js
- **AI Service**: Google Gemini 2.5 Flash
- **Storage**: å†…å­˜å­˜å‚¨ï¼ˆæ¼”ç¤ºç”¨ï¼‰
- **CORS**: å‰ç«¯è·¨åŸŸæ”¯æŒ

## ğŸ“¦ å®‰è£…ä¾èµ–

```bash
cd backend
npm install
```

## âš™ï¸ ç¯å¢ƒé…ç½®

1. å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿ï¼š
```bash
cp .env.example .env
```

2. é…ç½®Gemini API Keyï¼š
```env
# è·å–API Key: https://aistudio.google.com/
GEMINI_API_KEY=your_actual_api_key_here

# æœåŠ¡å™¨ç«¯å£
PORT=3002
```

> **å®‰å…¨æé†’**: è¯·å‹¿å°†çœŸå®API Keyæäº¤åˆ°Gitä»“åº“

## ğŸƒâ€â™‚ï¸ å¯åŠ¨æœåŠ¡

### å¼€å‘æ¨¡å¼
```bash
npm run dev
```

### ç”Ÿäº§æ¨¡å¼
```bash
npm start
```

å¯åŠ¨æˆåŠŸåè®¿é—® http://localhost:3002

## ğŸ“š APIæ¥å£æ–‡æ¡£

### åŸºç¡€ä¿¡æ¯
- **Base URL**: http://localhost:3002/api
- **å“åº”æ ¼å¼**: JSON
- **é”™è¯¯å¤„ç†**: ç»Ÿä¸€é”™è¯¯ç å’Œæ¶ˆæ¯

### JDç®¡ç†æ¥å£

#### è§£æJDæ–‡æœ¬
```http
POST /api/jd/parse
Content-Type: application/json

{
  "jdText": "æ‹›è˜å…¨æ ˆå·¥ç¨‹å¸ˆï¼Œè¦æ±‚3å¹´ä»¥ä¸ŠReactå’ŒNode.jsç»éªŒ..."
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "JDè§£ææˆåŠŸ",
  "data": {
    "id": "jd_1703123456789",
    "title": "å…¨æ ˆå·¥ç¨‹å¸ˆ",
    "company": "ç§‘æŠ€å…¬å¸",
    "skills": ["React", "Node.js", "TypeScript"],
    "experience": { "min": 3, "max": 5 },
    "parsedAt": "2024-12-01T10:30:00.000Z"
  }
}
```

#### è·å–å½“å‰JD
```http
GET /api/jd
```

#### JDçŠ¶æ€æ£€æŸ¥
```http
GET /api/jd/status
```

#### æ¸…é™¤JD
```http
DELETE /api/jd
```

### å€™é€‰äººç®¡ç†æ¥å£

#### å¯¼å…¥é¢„ç½®å€™é€‰äºº
```http
POST /api/candidates/import
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "å€™é€‰äººå¯¼å…¥æˆåŠŸ",
  "data": {
    "imported": 10,
    "candidates": [
      {
        "id": "candidate_01",
        "name": "Alex Chen",
        "title": "Senior Frontend Developer"
      }
    ]
  }
}
```

#### è·å–å€™é€‰äººåˆ—è¡¨
```http
GET /api/candidates?summary=true
```

#### è·å–å€™é€‰äººè¯¦æƒ…
```http
GET /api/candidates/{candidateId}
```

#### å€™é€‰äººç»Ÿè®¡
```http
GET /api/candidates/stats/overview
```

### åŒ¹é…åˆ†ææ¥å£

#### å•ä¸ªå€™é€‰äººåŒ¹é…
```http
POST /api/match/{candidateId}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "data": {
    "candidateId": "candidate_01",
    "candidateName": "Alex Chen",
    "matchScore": 87,
    "breakdown": {
      "skills": 85,
      "experience": 90,
      "education": 85,
      "projects": 88
    },
    "interviewQuestions": [
      {
        "id": 1,
        "question": "è¯·è¯¦ç»†ä»‹ç»ä½ åœ¨Reacté¡¹ç›®ä¸­çš„æ€§èƒ½ä¼˜åŒ–ç»éªŒ",
        "category": "æŠ€æœ¯èƒ½åŠ›",
        "reasoning": "å€™é€‰äººæœ‰ä¸°å¯Œçš„Reactç»éªŒï¼Œéœ€è¦æ·±å…¥äº†è§£æŠ€æœ¯æ·±åº¦"
      }
    ],
    "matchDetails": {
      "matchedSkills": ["React", "Node.js", "TypeScript"],
      "missingSkills": ["GraphQL"],
      "strengthAreas": ["æŠ€èƒ½åŒ¹é…: React, Node.js", "å·¥ä½œç»éªŒå……è¶³: 3å¹´ç»éªŒ"],
      "concernAreas": ["éœ€è¦è¡¥å¼ºæŠ€èƒ½: GraphQL"]
    }
  }
}
```

#### æ‰¹é‡åŒ¹é…æ‰€æœ‰å€™é€‰äºº
```http
GET /api/match/batch/all
```

#### Topå€™é€‰äººæ’å
```http
GET /api/match/ranking/top?limit=5
```

#### å€™é€‰äººå¯¹æ¯”
```http
GET /api/match/comparison/{candidateId1}/{candidateId2}
```

#### åŒ¹é…æ´å¯Ÿ
```http
GET /api/match/insights
```

### ç³»ç»Ÿæ¥å£

#### å¥åº·æ£€æŸ¥
```http
GET /health
```

#### APIçŠ¶æ€
```http
GET /api/status
```

## ğŸ§ª æµ‹è¯•æµç¨‹

### 1. å¯åŠ¨æœåŠ¡
```bash
npm run dev
```

### 2. å¥åº·æ£€æŸ¥
```bash
curl http://localhost:3002/health
```

### 3. å¯¼å…¥æµ‹è¯•æ•°æ®
```bash
# å¯¼å…¥å€™é€‰äºº
curl -X POST http://localhost:3002/api/candidates/import

# è§£æJD
curl -X POST http://localhost:3002/api/jd/parse \
  -H "Content-Type: application/json" \
  -d '{"jdText": "æ‹›è˜é«˜çº§å‰ç«¯å·¥ç¨‹å¸ˆï¼Œè¦æ±‚3å¹´Reactç»éªŒï¼Œç†Ÿæ‚‰TypeScriptã€Node.js"}'
```

### 4. åŒ¹é…æµ‹è¯•
```bash
# å•ä¸ªå€™é€‰äººåŒ¹é…
curl -X POST http://localhost:3002/api/match/candidate_01

# æ‰¹é‡åŒ¹é…
curl http://localhost:3002/api/match/batch/all
```

## ğŸ—‚ï¸ é¡¹ç›®ç»“æ„

```
backend/
â”œâ”€â”€ server.js              # Expressä¸»æœåŠ¡å™¨
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ jd.js              # JDè§£æå’Œç®¡ç†API
â”‚   â”œâ”€â”€ candidates.js      # å€™é€‰äººå¯¼å…¥å’ŒæŸ¥è¯¢API
â”‚   â””â”€â”€ matching.js        # åŒ¹é…ç®—æ³•å’ŒAIé—®é¢˜ç”ŸæˆAPI
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ geminiService.js   # Gemini APIé€šç”¨æœåŠ¡
â”‚   â”œâ”€â”€ jdParsingService.js # JDè§£æä¸“ç”¨æœåŠ¡
â”‚   â””â”€â”€ matchingService.js  # æŠ€èƒ½åŒ¹é…ç®—æ³•
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ storage.js          # è¿è¡Œæ—¶å†…å­˜æ•°æ®å­˜å‚¨
â”‚   â””â”€â”€ sampleCandidates.js # é¢„ç½®10ä¸ªå€™é€‰äººæ¡£æ¡ˆ
â”œâ”€â”€ package.json
â”œâ”€â”€ .env.example           # ç¯å¢ƒå˜é‡æ¨¡æ¿
â””â”€â”€ README.md             # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

## ğŸ“Š é¢„ç½®å€™é€‰äººæ•°æ®

ç³»ç»Ÿé¢„ç½®äº†10ä¸ªå¤šæ ·åŒ–çš„å€™é€‰äººæ¡£æ¡ˆï¼Œæ¶µç›–ï¼š

1. **Alex Chen** - èµ„æ·±å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆï¼ˆ3å¹´ç»éªŒï¼‰
2. **Sarah Johnson** - å…¨æ ˆå¼€å‘å·¥ç¨‹å¸ˆï¼ˆ5å¹´ç»éªŒï¼‰
3. **Michael Wang** - åç«¯å¼€å‘ä¸“å®¶ï¼ˆ4å¹´ç»éªŒï¼‰
4. **Emma Rodriguez** - UI/UXè®¾è®¡å¸ˆè½¬å¼€å‘ï¼ˆ2å¹´ç»éªŒï¼‰
5. **David Kim** - DevOpså·¥ç¨‹å¸ˆï¼ˆ6å¹´ç»éªŒï¼‰
6. **Lisa Zhang** - ç§»åŠ¨ç«¯å¼€å‘å·¥ç¨‹å¸ˆï¼ˆ3å¹´ç»éªŒï¼‰
7. **James Wilson** - æ•°æ®ç§‘å­¦å®¶ï¼ˆ4å¹´ç»éªŒï¼‰
8. **Anna Kowalski** - äº§å“ç»ç†è½¬æŠ€æœ¯ï¼ˆ2å¹´ç»éªŒï¼‰
9. **Ryan O'Connor** - ç³»ç»Ÿæ¶æ„å¸ˆï¼ˆ8å¹´ç»éªŒï¼‰
10. **Priya Sharma** - åˆšæ¯•ä¸šçš„æ–°äººå¼€å‘è€…ï¼ˆ0.5å¹´ç»éªŒï¼‰

æ¯ä¸ªå€™é€‰äººæ¡£æ¡ˆåŒ…å«ï¼š
- åŸºæœ¬ä¿¡æ¯ï¼ˆå§“åã€å½“å‰èŒä½ï¼‰
- å·¥ä½œç»éªŒï¼ˆå¹´æ•°ã€æœˆæ•°ï¼‰
- æ•™è‚²èƒŒæ™¯ï¼ˆå­¦æ ¡ã€å­¦ä½ï¼‰
- æŠ€èƒ½åˆ—è¡¨ï¼ˆç¼–ç¨‹è¯­è¨€ã€æ¡†æ¶ã€å·¥å…·ï¼‰
- é¡¹ç›®ç»å†ï¼ˆè¯¦ç»†æè¿°ã€ä½¿ç”¨æŠ€æœ¯ï¼‰
- è”ç³»æ–¹å¼ï¼ˆGitHubã€LinkedInã€ä¸ªäººç½‘ç«™ï¼‰

### ä¿®æ”¹å€™é€‰äººæ•°æ®

è¦ä¿®æ”¹é¢„ç½®å€™é€‰äººæ•°æ®ï¼Œè¯·ç¼–è¾‘ `backend/data/sampleCandidates.js` æ–‡ä»¶ï¼š

```javascript
// æ·»åŠ æ–°å€™é€‰äºº
{
  id: "candidate_11",
  name: "æ–°å€™é€‰äººå§“å",
  currentRole: "å½“å‰èŒä½",
  workExperience: { years: 2, months: 6 },
  education: {
    school: "å¤§å­¦åç§°",
    degree: "å­¦ä½"
  },
  skills: ["æŠ€èƒ½1", "æŠ€èƒ½2", "æŠ€èƒ½3"],
  projects: [
    {
      name: "é¡¹ç›®åç§°",
      description: "é¡¹ç›®æè¿°",
      technologies: ["æŠ€æœ¯æ ˆ"]
    }
  ]
}
```

## ğŸ› ï¸ åŒ¹é…ç®—æ³•è¯´æ˜

### è¯„åˆ†ç»´åº¦

1. **æŠ€èƒ½åŒ¹é… (40%æƒé‡)**
   - å®Œå…¨åŒ¹é…: 90-100åˆ†
   - éƒ¨åˆ†åŒ¹é…: 70-89åˆ†
   - æŠ€èƒ½ä¸è¶³: <70åˆ†

2. **å·¥ä½œç»éªŒ (25%æƒé‡)**
   - è¶…å‡ºè¦æ±‚: 90-100åˆ†
   - æ»¡è¶³è¦æ±‚: 80-89åˆ†
   - ç»éªŒä¸è¶³: æŒ‰æ¯”ä¾‹è®¡åˆ†

3. **æ•™è‚²èƒŒæ™¯ (15%æƒé‡)**
   - è¶…å‡ºè¦æ±‚: 90-100åˆ†
   - æ»¡è¶³è¦æ±‚: 80-89åˆ†
   - ä¸æ»¡è¶³: æŒ‰æ¯”ä¾‹è®¡åˆ†

4. **é¡¹ç›®ç»éªŒ (20%æƒé‡)**
   - åŸºäºé¡¹ç›®æ•°é‡å’ŒæŠ€æœ¯å¤šæ ·æ€§
   - ä¸°å¯Œé¡¹ç›®: 80-100åˆ†
   - ä¸€èˆ¬é¡¹ç›®: 60-79åˆ†
   - é¡¹ç›®è¾ƒå°‘: <60åˆ†

### AIé¢è¯•é—®é¢˜ç”Ÿæˆ

Gemini AIä¼šæ ¹æ®ä»¥ä¸‹å› ç´ ç”Ÿæˆé’ˆå¯¹æ€§é—®é¢˜ï¼š

- JDçš„å…·ä½“è¦æ±‚
- å€™é€‰äººçš„æŠ€èƒ½åŒ¹é…åº¦
- å€™é€‰äººçš„é¡¹ç›®ç»éªŒ
- æŠ€èƒ½gapåˆ†æ

é—®é¢˜ç±»å‹åŒ…æ‹¬ï¼š
- **æŠ€æœ¯èƒ½åŠ›**: æ·±å…¥æŠ€æœ¯ç»†èŠ‚
- **é¡¹ç›®ç»éªŒ**: å…·ä½“é¡¹ç›®å®æ–½
- **å›¢é˜Ÿåä½œ**: è½¯æŠ€èƒ½è¯„ä¼°

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æœåŠ¡å¯åŠ¨å¤±è´¥**
```bash
Error: Cannot find module 'express'
# è§£å†³: npm install
```

2. **Gemini APIè°ƒç”¨å¤±è´¥**
```bash
Error: API key not configured
# è§£å†³: æ£€æŸ¥.envæ–‡ä»¶ä¸­çš„GEMINI_API_KEY
```

3. **CORSé”™è¯¯**
```bash
Access to fetch blocked by CORS policy
# è§£å†³: æ£€æŸ¥å‰ç«¯URLæ˜¯å¦åœ¨server.jsçš„CORSé…ç½®ä¸­
```

4. **å†…å­˜å­˜å‚¨æ¸…ç©º**
```bash
# é‡å¯æœåŠ¡å™¨ä¼šæ¸…ç©ºæ‰€æœ‰å†…å­˜æ•°æ®
# è§£å†³: é‡æ–°å¯¼å…¥å€™é€‰äººå’Œè§£æJD
```

### è°ƒè¯•æ¨¡å¼

å¼€å¯è¯¦ç»†æ—¥å¿—ï¼š
```bash
DEBUG=* npm run dev
```

### APIæµ‹è¯•

ä½¿ç”¨Postmanæˆ–ç±»ä¼¼å·¥å…·æµ‹è¯•APIï¼š

1. å¯¼å…¥Postman Collectionï¼ˆå¦‚æœæä¾›ï¼‰
2. è®¾ç½®ç¯å¢ƒå˜é‡ `BASE_URL=http://localhost:3002`
3. æŒ‰é¡ºåºæµ‹è¯•å„ä¸ªç«¯ç‚¹

## ğŸ“ˆ æ€§èƒ½è€ƒè™‘

- **å¹¶å‘å¤„ç†**: Expressé»˜è®¤å¤„ç†å¹¶å‘è¯·æ±‚
- **AI APIé™åˆ¶**: Gemini APIæœ‰è°ƒç”¨é¢‘ç‡é™åˆ¶
- **å†…å­˜ä½¿ç”¨**: å½“å‰ä½¿ç”¨å†…å­˜å­˜å‚¨ï¼Œé‡å¯ä¼šä¸¢å¤±æ•°æ®
- **é”™è¯¯é‡è¯•**: AIè°ƒç”¨å¤±è´¥ä¼šè‡ªåŠ¨é‡è¯•

## ğŸ”’ å®‰å…¨å»ºè®®

1. **API Keyç®¡ç†**
   - ä½¿ç”¨ç¯å¢ƒå˜é‡å­˜å‚¨
   - ä¸è¦æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶
   - å®šæœŸè½®æ¢API Key

2. **è¾“å…¥éªŒè¯**
   - æ‰€æœ‰APIéƒ½æœ‰è¾“å…¥éªŒè¯
   - é˜²æ­¢XSSå’Œæ³¨å…¥æ”»å‡»

3. **CORSé…ç½®**
   - ä»…å…è®¸ä¿¡ä»»çš„å‰ç«¯åŸŸå
   - ç”Ÿäº§ç¯å¢ƒä¸­é™åˆ¶CORS

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚é‡é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. Node.jsç‰ˆæœ¬ (å»ºè®® v18+)
2. ç½‘ç»œè¿æ¥ï¼ˆGemini APIéœ€è¦ç½‘ç»œï¼‰
3. API Keyæœ‰æ•ˆæ€§
4. ç«¯å£å ç”¨æƒ…å†µ

## ğŸ”„ æ›´æ–°æ—¥å¿—

### v1.0.0 (å½“å‰ç‰ˆæœ¬)
- âœ… å®Œæ•´çš„JDè§£æåŠŸèƒ½
- âœ… 10ä¸ªé¢„ç½®å€™é€‰äººæ¡£æ¡ˆ
- âœ… AIé©±åŠ¨çš„åŒ¹é…ç®—æ³•
- âœ… é¢è¯•é—®é¢˜è‡ªåŠ¨ç”Ÿæˆ
- âœ… æ‰¹é‡å¤„ç†å’Œå¯¹æ¯”åŠŸèƒ½
- âœ… å®Œæ•´çš„APIæ–‡æ¡£

### è®¡åˆ’åŠŸèƒ½
- ğŸ“‹ æ•°æ®æŒä¹…åŒ–å­˜å‚¨
- ğŸ“‹ ç”¨æˆ·è®¤è¯å’Œæƒé™
- ğŸ“‹ æ›´å¤šAIæ¨¡å‹æ”¯æŒ
- ğŸ“‹ åŒ¹é…ç»“æœå¯¼å‡º